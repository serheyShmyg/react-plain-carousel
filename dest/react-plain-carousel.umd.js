!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.reactPlainCarousel=e(t.react)}(this,function(t){var e="default"in t?t.default:t;function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(e){n(t,e,i[e])})}return t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var s={overflow:"hidden"},u={overflow:"hidden"},l={float:"left"},h=function(h){function c(){var e,i,r,s=arguments;!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this);for(var u=arguments.length,l=new Array(u),h=0;h<u;h++)l[h]=s[h];i=!(r=(e=o(c)).call.apply(e,[this].concat(l)))||"object"!=typeof r&&"function"!=typeof r?a(this):r,n(a(i),"autoplayInterval",void 0),n(a(i),"touchStart",{}),n(a(i),"touchMove",{}),n(a(i),"isLongTouch",!1),i.handleTransitionEnd=i.handleTransitionEnd.bind(a(i)),i.handleResize=i.handleResize.bind(a(i)),i.handleTouchEnd=i.handleTouchEnd.bind(a(i)),i.handleTouchMove=i.handleTouchMove.bind(a(i)),i.handleTouchStart=i.handleTouchStart.bind(a(i)),i.cloneChild=i.cloneChild.bind(a(i));var d=t.Children.count(i.props.children),f=i.props.isInfinity&&d>1;return i.wrapperRef=t.createRef(),i.state={isMounted:!1,customTransform:void 0,realIndex:0,index:f?1:0,isInfinity:f,slidesNumbers:f?d+2:d,isTransition:!1,isTransitionInProgress:!1},i}var d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,t.Component),(d=[{key:"componentDidMount",value:function(){var t=this,e=this.props.onMount;this.$wrapper=this.wrapperRef.current,this.setState({width:this.getWrapperWidth(),isMounted:!0}),this.initAutoplay(),window.addEventListener("resize",this.handleResize),e({next:function(){return t.move(1)},prev:function(){return t.move(-1)},moveTo:function(e){return"number"==typeof e?t.moveTo({index:e+1}):void 0}})}},{key:"componentDidUpdate",value:function(t,e){var n=this,i=this.state,o=i.index,r=i.isInfinity,a=i.slidesNumbers,s=i.isTransitionInProgress;r||o!==a-1||s||this.stopAutoplay(),r&&(0===o&&e.isTransitionInProgress&&!s&&setTimeout(function(){n.moveTo({index:a-2,isTransition:!1,isTransitionInProgress:!1})},17),a-1===o&&e.isTransitionInProgress&&!s&&setTimeout(function(){n.moveTo({index:1,isTransition:!1,isTransitionInProgress:!1})},17))}},{key:"componentWillUnmount",value:function(){this.stopAutoplay(),window.removeEventListener("resize",this.handleResize)}},{key:"getWrapperWidth",value:function(){return this.$wrapper&&this.$wrapper.clientWidth}},{key:"getInnerWidth",value:function(){var t=this.state,e=t.width,n=t.slidesNumbers;return e&&n?e*n:null}},{key:"cloneChild",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return!1;var o=i({},l,{width:this.state.width});return e.cloneElement(t,i({style:i({},o,t.props.style||{})},n))}},{key:"getChildren",value:function(){var e,n=this.state.isInfinity,i=t.Children.map(this.props.children,this.cloneChild);return n?[this.cloneChild(i[i.length-1],{key:"clonedlast"})].concat(function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(e=i)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[this.cloneChild(i[0],{key:"clonedfirst"})]):i}},{key:"move",value:function(t){var e=this.state,n=e.index;if(!t||n===e.slidesNumbers-1&&t>0||0===n&&t<0||e.isTransitionInProgress)return!1;this.moveTo({index:n+t,customTransform:void 0})}},{key:"moveTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initAutoplay(),this.setState(function(){return i({isTransition:!0,isTransitionInProgress:!0},t)})}},{key:"getRealIndex",value:function(){var t=this.state,e=t.index;return t.isInfinity?t.slidesNumbers-1===e?0:e-1:e}},{key:"calcTransform",value:function(t){var e=this.state;return t=t||e.index*e.width,{transform:"translate3d(".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-").concat(t,"px, 0, 0)")}}},{key:"calcAnimation",value:function(){var t=this.props,e=t.transitionTimingFunc,n=this.state.isTransition,i=t.transitionDelay/100;return i<1e3&&(i=".".concat(i)),n?{transition:"transform ".concat(i,"s ").concat(e)}:{}}},{key:"stopAutoplay",value:function(){this.autoplayInterval=this.autoplayInterval?clearInterval(this.autoplayInterval):this.autoplayInterval}},{key:"initAutoplay",value:function(){var t=this,e=this.props,n=e.autoplayDelay;if(!e.autoplay||this.state.slidesNumbers<=1)return!1;if(n<e.transitionDelay)throw new Error("`autoplayDelay` less than `transitionDelay`, fix it");this.stopAutoplay(),this.autoplayInterval=setInterval(function(){return t.move(1)},n)}},{key:"handleTouchStart",value:function(t){var e=this,n=t.touches;setTimeout(function(){e.isLongTouch=!0},this.props.longTouchDelay),this.touchStart={x:n[0].pageX,y:n[0].pageY,time:+new Date}}},{key:"handleTouchMove",value:function(t){var e=t.touches,n=t.scale,i=this.state,o=i.index,r=i.width;if(!(e.length>1||n&&1!==n)){var a=e[0].pageX;this.touchMove={x:a,y:e[0].pageY,time:+new Date,deltaX:o*r+(this.touchStart.x-a)},this.setState({customTransform:this.touchMove.deltaX,isTransition:!1})}}},{key:"handleTouchEnd",value:function(){var t=this.state,e=t.index,n=t.isInfinity,i=t.width,o=t.slidesNumbers,r=this.touchMove.deltaX,a=Math.abs(e*i-r),s=o-(e+1)==0,u=r>e*i?1:-1,l=function(){return{customTransform:void 0,isTransition:!0}};n?!this.isLongTouch||a>i/2?this.move(u):this.setState(l):!this.isLongTouch||a>i/2?s&&1===u?this.setState(l):this.move(u):this.setState(l),this.touchStart={},this.touchMove={},this.isLongTouch=!1}},{key:"handleResize",value:function(){this.setState({width:this.getWrapperWidth()})}},{key:"handleTransitionEnd",value:function(){var t=this.props.onTransitionEnd,e=this.getRealIndex();this.setState({isTransitionInProgress:!1,realIndex:e}),"function"==typeof t&&t({index:e})}},{key:"render",value:function(){var t=this.props,n=t.className,o=t.innerClassName,r=this.state,a=r.customTransform,l=s,h=u,c=r.isMounted?this.getChildren():null,d=this.getInnerWidth(),f=this.calcTransform(a),p=this.calcAnimation();return e.createElement("div",{className:n,style:l,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,ref:this.wrapperRef},e.createElement("div",{style:i({},h,{width:d},f,p),className:o,onTransitionEnd:this.handleTransitionEnd},c))}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(c.prototype,d),c}();return n(h,"defaultProps",{isInfinity:!1,autoplay:!1,autoplayDelay:5e3,transitionTimingFunc:"ease",transitionDelay:500,longTouchDelay:250,onTransitionEnd:void 0,className:"",innerClassName:"",children:void 0,onMount:function(){}}),h});
